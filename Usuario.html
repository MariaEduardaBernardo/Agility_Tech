<meta charset="UTF-8">
<title>Perfil</title>
<link rel="stylesheet" href="/CSS/Principais.css">
<link rel="icon" type="imagem/png" href="https://uploaddeimagens.com.br/images/004/457/464/full/imagem_2023-05-08_113702062.png?1683556624"/>

<!-- Menu lateral -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>


<link rel="stylesheet" href="/CSS/Elementos.css">
<link rel="stylesheet" href="/CSS/Principais.css">

<script src="/JS/script.js"></script>
<script src="/JS/CadUser.js"></script>

</head>
<body>
    <header id="headerContainer"></header>

<main>

      <div class="inf_user">
        <div class="sidebar">
          <section id="usuario">
            <div class="user-info">
              <img src="https://uploaddeimagens.com.br/images/004/511/439/thumb/imagem_2023-06-18_214919404.png?1687135775" alt="">
              <div class="user-details">
                <h1 id="greeting"></h1>
                <p>Nome: <span id="userName"></span></p>
                <p>Email: <span id="userEmail"></span></p>
              </div>
            </div>
            <button id="edit">Editar dados</button>
            <button id="logoutButton">Sair</button>
          </section>
        </div>

        <div class="op_ajuda">
          <section>
            <h2>Formas que posso ajudar</h2>
            <p id="introText">Você quer ajudar as ONGs, mas não sabe como? Compartilhe suas ideias conosco! Todos temos algo a oferecer, seja por meio de habilidades específicas, recursos ou simplesmente nosso tempo e dedicação. Digite abaixo suas ideias sobre como você pode contribuir e fazer a diferença na vida das pessoas atendidas pelas ONGs.</p>

<form id="infoForm">
              <label for="additionalInput">Adicionar informação:</label>
              <input type="text" id="additionalInput" name="additionalInput">
</form>
              <button type="submit" id="addButton">Adicionar</button>

            <div id="additionalInfo"></div>

          </section>

          <section>
            <h2>ONG que mais combina comigo</h2>
            <p>Você ainda não respondeu o questionário de opções.</p>
            <button id="escolha_help" onclick="openModal()">Fazer Teste</button>
          </section>

          <section>
            <h2>Ultimas ONG visitadas</h2>
          </section>
        </div>
      </div>

      <script>
        // Função para adicionar uma informação adicional
        function addAdditionalInfo() {
          const additionalInput = document.getElementById("additionalInput");
          const additionalInfo = document.getElementById("additionalInfo");

          // Verifica se o campo de entrada não está vazio
          if (additionalInput.value.trim() !== "") {
            const infoItem = document.createElement("div");
            infoItem.classList.add("info-item");

            const infoText = document.createElement("span");
            infoText.textContent = additionalInput.value;
            infoItem.appendChild(infoText);

            const removeButton = document.createElement("button");
            removeButton.textContent = "Remover";
            removeButton.classList.add("remove-button");
            removeButton.addEventListener("click", removeAdditionalInfo);
            infoItem.appendChild(removeButton);

            additionalInfo.appendChild(infoItem);

            // Limpa o campo de entrada após adicionar a informação
            additionalInput.value = "";
          }
        }

        // Função para remover uma informação adicional
        function removeAdditionalInfo(event) {
          const infoItem = event.target.closest(".info-item");
          infoItem.remove();
        }

        // Evento de submit do formulário
        document.getElementById("infoForm").addEventListener("submit", function (event) {
          event.preventDefault();
          addAdditionalInfo();
        });
      </script>


</main>
<footer>
<div class="rodape">
  <p>Desenvolvimento by Agility Tech</p>
	<p>&copy; 2023 - Todos os direitos reservados</p>
</div>
</footer>

	  </main>
	  </body>
	  </html>



<script>
// Verificar o estado de autenticação ao carregar a página
window.addEventListener('DOMContentLoaded', () => {
  // Adicionar listener para o evento onAuthStateChanged
  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      // O usuário está autenticado
      console.log('Usuário autenticado:', user.email);

      // Exibir o email do usuário
      let userEmailElement = document.getElementById("userEmail");
      userEmailElement.textContent = user.email;

      // Obter o nome do usuário do banco de dados
      db.where("idEmail", "==", user.email.toLowerCase())
        .get()
        .then((snapshot) => {
          if (!snapshot.empty) {
            const userData = snapshot.docs[0].data();
            const userNameElement = document.getElementById("userName");
            userNameElement.textContent = "" + userData.idName;
          }
        })
        .catch((error) => {
          console.log("Erro ao obter o nome do usuário:", error);
        });

      // Exibir o contêiner com as informações do usuário
      document.getElementById("hello-world").style.display = "block";

    } else {
      // O usuário não está autenticado, redirecionar para a página "teste.html"
      window.location.href = "index.html";
    }
  });

  // ...

});

window.addEventListener('DOMContentLoaded', () => {
  // ...

  // Adicionar ouvinte de eventos para o botão de sair
  const logoutButton = document.getElementById("logoutButton");
  logoutButton.addEventListener("click", () => {
    firebase.auth().signOut().then(() => {
      // Logout bem-sucedido, redirecionar para a página "teste.html"
      window.location.href = "HTML/AcessoUser.html";
    }).catch((error) => {
      // Ocorreu um erro ao fazer logout
      console.log('Erro ao fazer logout:', error);
    });
  });
});

</script>

<script>
    document.getElementById("infoForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Evita o comportamento padrão de recarregar a página ao enviar o formulário

    var additionalInfo = document.getElementById("additionalInput").value;
    var additionalParagraph = document.createElement("p");
    additionalParagraph.textContent = additionalInfo;

    document.getElementById("additionalInfo").appendChild(additionalParagraph);

    // Limpe o formulário
    document.getElementById("infoForm").reset();
  });

  document.getElementById("infoForm").addEventListener("submit", function(event) {
  event.preventDefault();

  var additionalInfo = document.getElementById("additionalInput").value;
  var additionalParagraph = document.createElement("p");
  additionalParagraph.textContent = additionalInfo;

  document.getElementById("additionalInfo").appendChild(additionalParagraph);

  // Limpa o formulário
  document.getElementById("infoForm").reset();

  // Oculta o texto introdutório
  document.getElementById("introText").style.display = "none";
});

document.getElementById("additionalInfo").addEventListener("click", function(event) {
  if (event.target.tagName === "P") {
    event.target.parentNode.removeChild(event.target);

    // Verifica se não há mais informações adicionais
    if (document.getElementById("additionalInfo").childElementCount === 0) {
      // Exibe o texto introdutório novamente
      document.getElementById("introText").style.display = "block";
    }
  }
});


  </script>
