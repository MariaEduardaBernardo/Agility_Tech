<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Perfil</title>
    <link rel="icon" type="imagem/png" href="https://uploaddeimagens.com.br/images/004/457/464/full/imagem_2023-05-08_113702062.png?1683556624"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <link rel="stylesheet" href="/CSS/Elementos.css">
    <link rel="stylesheet" href="/CSS/Principais.css">
    <link rel="stylesheet" href="/CSS/Carousel.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Slick -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>


    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>

    <!-- Script menu-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
    <header id="headerContainer"></header>

    <main>
        <!-- Conteúdo principal -->

        <div class="inf_user">
            <div class="sidebar">
                <section id="usuario">
                    <img id="imagem"
                        src="https://uploaddeimagens.com.br/images/004/481/297/thumb/imagem_2023-05-25_131620590.png?1685031389"
                        alt="">

                    <br>
                    <h1 id="greeting"></h1>
                    <p>Nome: <span id="userName"></span></p>
                    <p>Email: <span id="userEmail"></span></p>
                    <button>Editar perfil</button>
                    <button>Sair da conta</button>

                </section>
            </div>

            <div class="op_ajuda">
                <section>
                    <h2>Formas que posso ajudar</h2>
                    <p>Você quer ajudar as ONGs, mas não sabe como? Compartilhe suas ideias conosco! Todos temos algo a
                        oferecer, seja por meio de habilidades específicas, recursos ou simplesmente nosso tempo e
                        dedicação. Digite abaixo suas ideias sobre como você pode contribuir e fazer a diferença na vida
                        das pessoas atendidas pelas ONGs.</p>
                </section>

                <section>
                    <h2>ONG que mais combina comigo</h2>
                    <p>Você ainda não respondeu o questionário de opções.</p>
                    <button id="escolha_help_button" onclick="openModal()">Fazer Teste</button>
                  </section>

                  <script>
                    function closeModal() {
                      var modal = document.getElementById('myModal');
                      modal.style.display = 'none';
                    }

                    function openModal() {
                      var modal = document.getElementById('myModal');
                      modal.style.display = 'block';
                    }

                    var modalContainer = document.getElementById('modalContainer');

                    fetch('formulario.html')
                      .then(function (response) {
                        return response.text();
                      })
                      .then(function (html) {
                        modalContainer.innerHTML = html;
                      })
                      .catch(function (error) {
                        console.error('Erro ao carregar o modal:', error);
                      });
                  </script>


                <br>
                <section>
                    <h2>Ultimas ONG visitadas</h2>
                </section>
            </div>
        </div>

    </main>
    <footer>
        <div class="rodape">
            <p>Desenvolvimento by Agility Tech</p>
            <p>&copy; 2023 - Todos os direitos reservados</p>
        </div>
    </footer>

    <script src="/JS/script.js"></script>
    <script src="/JS/CadUser.js"></script>

    <style>
        body {
            background-color: #D6E1E7;
        }
    </style>

    <div id="modalContainer"></div>

    <script>
        // Verificar o estado de autenticação ao carregar a página
        window.addEventListener('DOMContentLoaded', () => {
            // Adicionar listener para o evento onAuthStateChanged
            firebase.auth().onAuthStateChanged((user) => {
                if (user) {
                    // O usuário está autenticado
                    console.log('Usuário autenticado:', user.email);

                    // Exibir o email do usuário
                    let userEmailElement = document.getElementById("userEmail");
                    userEmailElement.textContent = user.email;

                    let userNameElement = document.getElementById("userName");
                    userNameElement.textContent = "Olá, " + user.displayName;
                } else {
                    // O usuário não está autenticado, redirecionar para a página "teste.html"
                    window.location.href = "index.html";
                }
            })
        })
    </script>


    <script>
        var modalContainer = document.getElementById('modalContainer');

        fetch('formulario.html')
            .then(function (response) {
                return response.text();
            })
            .then(function (html) {
                modalContainer.innerHTML = html;
            })
            .catch(function (error) {
                console.error('Erro ao carregar o modal:', error);
            });

    </script>

</body>

</html>
